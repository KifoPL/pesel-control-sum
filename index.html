<head>
	<title>Calculate Control sum</title>
</head>

<body>
	<h1>Pesel control sum</h1>

	<label for="pesel">10 digits of Pesel:</label><br>
	<input type="number" id="pesel" maxlength="10" placeholder="9901319999"
		oninput="displayPeselNum(this.value)"></input><br>
	<p>11th digit: <b id="result"></b></p>

	<script>
		function displayPeselNum(pesel) {
			document.getElementById("result").innerHTML = calculateControlSum(pesel);
		}
		function calculateControlSum(peselPart) {
			if (peselPart.length != 10) return "n/a";
			let dp = peselPart.split("");
			let ms = [1, 3, 7, 9, 1, 3, 7, 9, 1, 3];
			let dm = [];
			for (let i = 0; i < dp.length; i++) {
				dm.push(dp[i] * ms[i]);
			}
			let sum = dm.reduce((a, b) => a + b);
			let result = (10 - (sum % 10)) % 10;
			return result;
		}
	</script>
</body>